package recommendation;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Set;

import db.MySQLConnection;

public class exportData {
	public static void main(String[] args) {
		try (PrintWriter writer = new PrintWriter(new File("test.csv"))) {

			// write column names
			MySQLConnection connection = new MySQLConnection();
			HashMap<String, Integer> map = connection.getIngredientFreq();
			Set<String> columns = Model.freqWords(map, 5);
			System.out.println(columns);

			StringBuilder sb = new StringBuilder();
			sb.append("item_id");
			sb.append(',');
			for (String s : columns) {
				sb.append(s);
				sb.append(',');
			}
			sb.append('\n');
			
			// insert rows
			HashMap<Integer, List<String>> id_ingred_map = connection.getItemIdIngred();
			
			System.out.println(id_ingred_map.get(1));
//		      sb.append("1");
//		      sb.append(',');
//		      sb.append("Prashant Ghimire");
//		      sb.append('\n');

			writer.write(sb.toString());
			System.out.println("done!");

		} catch (FileNotFoundException e) {
			System.out.println(e.getMessage());
		}
	}
}
